<!DOCTYPE html>
<html>

<head>
  <title>Registration Form</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" type="text/css" href="../Styles/Login.css" />
</head>

<body>
  <form class="container" id="form">
    <h2>Register</h2>
    <label for="username">Username</label>
    <input type="text" id="username" required />
    <label for="password">Password</label>
    <input type="password" id="password" required />
    <button type="submit">Register</button>
    <p3>Already have an account? Sign in</p3>
  </form>

  <script>
    const submitLogin = (event) => {
      event.preventDefault();
      fetch(
        'https://5tzus5shoyscskyohwtq4ccfoy0aswsy.lambda-url.af-south-1.on.aws/api/User/Register',
        {
          method: 'POST',
          mode: 'cors',
          headers:
          {
            'Content-Type': 'application/JSON'
          },
          //TODO: Sanitize
          body: JSON.stringify(
            {
              username: event.target.elements['username'].value,
              password: event.target.elements['password'].value
            }
          )

        }
      ).then((res) => {
        if (res.status !== 200) {
          alert("An error has occured, please try again.");
        }
        else {
          window.location.href = '/login';
        }
      }
      )

    }

    const form = document.getElementById('form');
    form.addEventListener('submit', submitLogin);
  </script>
</body>

</html>